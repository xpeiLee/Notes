<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .box{
            width: 300px;
            height: 500px;
            border: 1px solid red;
            margin: 0 auto;
            position: relative;
            overflow: hidden;

        }
        .content{
            /*width: 300px;*/
            height: auto;
            position: absolute;
            left:0;
            top:0;
            padding-right: 18px;
            
        }
        .scroll{
            width: 18px;
            height: 100%;
            position: absolute;
            top:0;
            right: 0;
            background-color: #ccc;
        }
        .bar{
            width: 100%;
            height: 100px;
            background-color: red;
            cursor: pointer;
            /*border-radius: 10px;*/
            position: absolute;
            top: 0;
            left:0;
        }
    </style>
</head>
<body>
<div class="box" id="box">
    <div class="content">
        部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文字内容部分文
    </div>
    <div class="scroll">
        <div class="bar">
        </div>
    </div>
</div>
<script>
    //最大的盒子
    var box = document.getElementById("box");
//    内容盒子
    var content = box.children[0];
    //右边的盒子
    var scroll = box.children[1];
    //滚动条
    var bar = scroll.children[0];

    //首先我们需要计算红色滚动条的高度，内容越多，滚动条越短，反之 反之
    //滚动条的计算公式 :容器的高度/内容的高度 *容器的高度
    var barHeight = box.offsetHeight/content.offsetHeight*box.offsetHeight;
    barHeight = barHeight>box.offsetHeight?box.offsetHeight:barHeight;
    bar.style.height = barHeight + "px";
//    下面开始计算红色盒子的拖动
    scrollMove(bar,content);
    //处理联动
    function scrollMove(obj,target) {

        obj.onmousedown = function (event) {
            var event = event || window.event;
            //计算大盒子距顶端的距离+鼠标到红色盒子顶端的距离
            var t = event.clientY - this.offsetTop;


            document.onmousemove = function (event) {
                var event = event || window.event;
                var barTop = event.clientY - t;// 红色top值
                //计算content移动的距离

                //计算公式（内容盒子高度 - 大盒子高度）/(大盒子高度-红色盒子高度)*红色盒子top

                if (barTop < 0){
                    barTop = 0;
                }else  if(barTop > target.parentNode.offsetHeight - bar.offsetHeight){
                    barTop = target.parentNode.offsetHeight - bar.offsetHeight;
                }
                var contentTop = (target.offsetHeight - target.parentNode.offsetHeight)/(target.parentNode.offsetHeight-obj.offsetHeight)*barTop;
                target.style.top = -contentTop + "px";

                obj.style.top = barTop + "px";


            }

        }

    document.onmouseup = function () {
        document.onmousemove = null;

    }

    }
</script>

</body>
</html>